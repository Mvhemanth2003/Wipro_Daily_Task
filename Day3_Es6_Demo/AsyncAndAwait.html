<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Welcome</h1>

    <script>

    async function fetchComments() {
        try {
            console.log("Fetching comments...");
            const response = await fetch('https://jsonplaceholder.typicode.com/comments');
            // Here fetch returns a Promise that resolves to the Response object representing the response to the request
            const comments = await response.json(); // Parsing the JSON response
            // Awaiting the json() method which also returns a Promise that resolves with the result of parsing the body text as JSON
            
            console.log("Comments fetched:", comments);
            document.body.innerHTML += `<h2>Comments Fetched:</h2><pre>${JSON.stringify(comments, null, 2)}</pre>`;
        } catch (error) {
            console.error("Error fetching comments:", error);
        }
    }
    // Calling the async function
    fetchComments();


// We should always handle exception while working with asynchronous code ie with Async and await -->
//    <p>In the above example, we used try...catch blocks to handle any errors that might occur during the fetching and processing of comments. This is important because:</p>
//    <ul>
//        <li>Asynchronous operations can fail for various reasons (e.g., network issues, server errors).</li>
//        <li>Using try...catch allows us to gracefully handle errors and provide feedback to the user.</li>
//        <li>It helps in debugging by catching errors at the point they occur.</li>

    </script>
</body>
</html>